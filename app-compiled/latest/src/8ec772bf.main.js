/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 1.0.1
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

!function(){function t(e,i){function n(t,e){return function(){return t.apply(e,arguments)}}var s;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=e,this.tapDelay=i.tapDelay||200,!t.notNeeded(e)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,c=0,u=r.length;u>c;c++)a[r[c]]=n(a[r[c]],a);o&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,i.hijacked||i,n):o.call(e,t,i,n)},e.addEventListener=function(t,i,n){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):o.call(e,t,i,n)}),"function"==typeof e.onclick&&(s=e.onclick,e.addEventListener("click",function(t){s(t)},!1),e.onclick=null)}}var e,i,n;!function(t){function o(t,e){return w.call(t,e)}function s(t,e){var i,n,o,s,r,a,c,u,h,l,p,f=e&&e.split("/"),d=v.map,m=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),r=t.length-1,v.nodeIdCompat&&O.test(t[r])&&(t[r]=t[r].replace(O,"")),t=f.concat(t),h=0;h<t.length;h+=1)if(p=t[h],"."===p)t.splice(h,1),h-=1;else if(".."===p){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&d){for(i=t.split("/"),h=i.length;h>0;h-=1){if(n=i.slice(0,h).join("/"),f)for(l=f.length;l>0;l-=1)if(o=d[f.slice(0,l).join("/")],o&&(o=o[n])){s=o,a=h;break}if(s)break;!c&&m&&m[n]&&(c=m[n],u=h)}!s&&c&&(s=c,a=u),s&&(i.splice(0,a,s),t=i.join("/"))}return t}function r(e,i){return function(){return f.apply(t,b.call(arguments,0).concat([e,i]))}}function a(t){return function(e){return s(e,t)}}function c(t){return function(e){g[t]=e}}function u(e){if(o(y,e)){var i=y[e];delete y[e],_[e]=!0,p.apply(t,i)}if(!o(g,e)&&!o(_,e))throw new Error("No "+e);return g[e]}function h(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t){return function(){return v&&v.config&&v.config[t]||{}}}var p,f,d,m,g={},y={},v={},_={},w=Object.prototype.hasOwnProperty,b=[].slice,O=/\.js$/;d=function(t,e){var i,n=h(t),o=n[0];return t=n[1],o&&(o=s(o,e),i=u(o)),o?t=i&&i.normalize?i.normalize(t,a(e)):s(t,e):(t=s(t,e),n=h(t),o=n[0],t=n[1],o&&(i=u(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},m={require:function(t){return r(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:l(t)}}},p=function(e,i,n,s){var a,h,l,p,f,v,w=[],b=typeof n;if(s=s||e,"undefined"===b||"function"===b){for(i=!i.length&&n.length?["require","exports","module"]:i,f=0;f<i.length;f+=1)if(p=d(i[f],s),h=p.f,"require"===h)w[f]=m.require(e);else if("exports"===h)w[f]=m.exports(e),v=!0;else if("module"===h)a=w[f]=m.module(e);else if(o(g,h)||o(y,h)||o(_,h))w[f]=u(h);else{if(!p.p)throw new Error(e+" missing "+h);p.p.load(p.n,r(s,!0),c(h),{}),w[f]=g[h]}l=n?n.apply(g[e],w):void 0,e&&(a&&a.exports!==t&&a.exports!==g[e]?g[e]=a.exports:l===t&&v||(g[e]=l))}else e&&(g[e]=n)},e=i=f=function(e,i,n,o,s){if("string"==typeof e)return m[e]?m[e](i):u(d(e,i).f);if(!e.splice){if(v=e,v.deps&&f(v.deps,v.callback),!i)return;i.splice?(e=i,i=n,n=null):e=t}return i=i||function(){},"function"==typeof n&&(n=o,o=s),o?p(t,e,i,n):setTimeout(function(){p(t,e,i,n)},4),f},f.config=function(t){return f(t)},e._defined=g,n=function(t,e,i){e.splice||(i=e,e=[]),o(g,t)||o(y,t)||(y[t]=[t,e,i])},n.amd={jQuery:!0}}(),n("almond",function(){});var o=navigator.userAgent.indexOf("Android")>0,s=/iP(ad|hone|od)/.test(navigator.userAgent),r=s&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=s&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(s&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!o;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},t.prototype.determineEventType=function(t){return o&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;s&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,i,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],s){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!r){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,i,n,c,u,h=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(u=t.changedTouches[0],h=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||h,h.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=h.tagName.toLowerCase(),"label"===n){if(e=this.findControl(h)){if(this.focus(h),o)return!1;h=e}}else if(this.needsFocus(h))return t.timeStamp-i>100||s&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(h),this.sendClick(h,t),s&&"select"===n||(this.targetElement=null,t.preventDefault()),!1);return s&&!r&&(c=h.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(h)||(t.preventDefault(),this.sendClick(h,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;o&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,i;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!o)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(i>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction?!0:!1},t.attach=function(e,i){return new t(e,i)},"undefined"!=typeof n&&n.amd?n("fastclick",[],function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t,n("famous/core/Entity",["require","exports","module"],function(t,e,i){function n(t){return a[t]}function o(t,e){a[t]=e}function s(t){var e=a.length;return o(e,t),e}function r(t){o(t,null)}var a=[];i.exports={register:s,unregister:r,get:n,set:o}}),n("famous/core/Transform",["require","exports","module"],function(t,e,i){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function o(t){return Math.sqrt(n(t))}function s(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},r.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},r.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],o=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.thenMove(e,[i,n,o])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},r.scale=function(t,e,i){return void 0===i&&(i=1),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var n=Math.cos(t),o=Math.sin(t),s=Math.cos(e),r=Math.sin(e),a=Math.cos(i),c=Math.sin(i),u=[s*a,n*c+o*r*a,o*c-n*r*a,0,-s*c,n*a-o*r*c,o*a+n*r*c,0,r,-o*s,n*s,0,0,0,0,1];return u},r.rotateAxis=function(t,e){var i=Math.sin(e),n=Math.cos(e),o=1-n,s=t[0]*t[0]*o,r=t[0]*t[1]*o,a=t[0]*t[2]*o,c=t[1]*t[1]*o,u=t[1]*t[2]*o,h=t[2]*t[2]*o,l=t[0]*i,p=t[1]*i,f=t[2]*i,d=[s+n,r+f,a-p,0,r-f,c+n,u+l,0,a+p,u-l,h+n,0,0,0,0,1];return d},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),o=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.thenMove(e,[i,n,o])},r.skew=function(t,e,i){return[1,0,0,0,Math.tan(i),1,0,0,Math.tan(e),Math.tan(t),1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],o=t[1]*t[10]-t[2]*t[9],s=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],c=t[0]*t[6]-t[2]*t[4],u=t[0]*t[5]-t[1]*t[4],h=t[0]*e-t[1]*i+t[2]*n,l=1/h,p=[l*e,-l*o,l*a,0,-l*i,l*s,-l*c,0,l*n,-l*r,l*u,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=s(e[0]),a=o(e),c=[e[0]+i*a,e[1],e[2]],u=2/n(c);if(u>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];h[0]=1-u*c[0]*c[0],h[5]=1-u*c[1]*c[1],h[10]=1-u*c[2]*c[2],h[1]=-u*c[0]*c[1],h[2]=-u*c[0]*c[2],h[6]=-u*c[1]*c[2],h[4]=h[1],h[8]=h[2],h[9]=h[6];var l=r.multiply(h,t),p=[l[5],l[6]],f=s(p[0]),d=o(p),m=[p[0]+f*d,p[1]],g=2/n(m),y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];y[5]=1-g*m[0]*m[0],y[10]=1-g*m[1]*m[1],y[6]=-g*m[0]*m[1],y[9]=y[6];var v=r.multiply(y,h),_=r.multiply(v,t),w=r.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=r.multiply(_,w),v=r.multiply(w,v);var b={};return b.translate=r.getTranslate(t),b.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],b.rotate[0]||(b.rotate[0]=0,b.rotate[2]=Math.atan2(v[4],v[5])),b.scale=[_[0],_[5],_[10]],b.skew=[Math.atan2(_[9],b.scale[2]),Math.atan2(_[8],b.scale[2]),Math.atan2(_[4],b.scale[0])],Math.abs(b.rotate[0])+Math.abs(b.rotate[2])>1.5*Math.PI&&(b.rotate[1]=Math.PI-b.rotate[1],b.rotate[1]>Math.PI&&(b.rotate[1]-=2*Math.PI),b.rotate[1]<-Math.PI&&(b.rotate[1]+=2*Math.PI),b.rotate[0]<0?b.rotate[0]+=Math.PI:b.rotate[0]-=Math.PI,b.rotate[2]<0?b.rotate[2]+=Math.PI:b.rotate[2]-=Math.PI),b},r.average=function(t,e,i){i=void 0===i?.5:i;for(var n=r.interpret(t),o=r.interpret(e),s={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)s.translate[a]=(1-i)*n.translate[a]+i*o.translate[a],s.rotate[a]=(1-i)*n.rotate[a]+i*o.rotate[a],s.scale[a]=(1-i)*n.scale[a]+i*o.scale[a],s.skew[a]=(1-i)*n.skew[a]+i*o.skew[a];return r.build(s)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(n,i),e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:t&&e?!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]:!0},r.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=r}),n("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function n(){this.result={}}function o(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var s=t("./Transform");n._instance=new n,n.parse=function(t,e){return n._instance.parse(t,e)},n.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,s.identity),this.result},n.prototype.reset=function(){this.result={}};var r=[0,0];n.prototype._parseSpec=function(t,e,i){var n,a,c,u,h,l;if("number"==typeof t){if(n=t,c=e.transform,e.size&&e.origin&&(e.origin[0]||e.origin[1])){var p=[e.origin[0]*e.size[0],e.origin[1]*e.size[1],0];c=s.thenMove(c,o(p,i))}this.result[n]={transform:c,opacity:e.opacity,origin:e.origin||r,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var f=0;f<t.length;f++)this._parseSpec(t[f],e,i);else{a=t.target,c=e.transform,u=e.opacity,h=e.origin,l=e.size;var d=i;if(void 0!==t.opacity&&(u=e.opacity*t.opacity),t.transform&&(c=s.multiply(e.transform,t.transform)),t.origin&&(h=t.origin,d=e.transform),t.size){var m=e.size;l=[t.size[0]||m[0],t.size[1]||m[1]],m&&h&&(h[0]||h[1])&&(c=s.thenMove(c,o([h[0]*m[0],h[1]*m[1],0],i)),c=s.moveThen([-h[0]*l[0],-h[1]*l[1],0],c)),d=e.transform,h=null}this._parseSpec(a,{transform:c,opacity:u,origin:h,size:l},d)}}},i.exports=n}),n("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function n(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function o(t,e,i){for(var n=r.parse(t,e),a=Object.keys(n),c=0;c<a.length;c++){var u=a[c],h=s.get(u),l=n[u];l.allocator=e.allocator;var p=h.commit(l);p?o(p,e,i):i[u]=l}}var s=t("./Entity"),r=t("./SpecParser");n.prototype.add=function(t){var e=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},n.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},n.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof n?t:this},n.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},n.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var n=e[i];if(void 0===this._resultCache[n]){var r=s.get(n);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},o(this.render(),t,this._resultCache)},n.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=n}),n("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function n(){this.listeners={},this._owner=this}n.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var n=0;n<i.length;n++)i[n].call(this._owner,e);return this},n.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var i=this.listeners[t].indexOf(e);return 0>i&&this.listeners[t].push(e),this},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=function(t,e){var i=this.listeners[t].indexOf(e);return i>=0&&this.listeners[t].splice(i,1),this},n.prototype.bindThis=function(t){this._owner=t},i.exports=n}),n("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function n(){o.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var o=t("./EventEmitter");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},n.setOutputHandler=function(t,e){e instanceof n&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=e.on,t.removeListener=e.removeListener.bind(e)},n.prototype.emit=function(t,e){o.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},n.prototype.trigger=n.prototype.emit,n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},n.prototype.on=function(t){if(o.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var i=0;i<this.upstream.length;i++)this.upstream[i].on(t,e)}return this},n.prototype.addListener=n.prototype.on,n.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},n.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=n}),n("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},n.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},i.exports=n}),n("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var n={};n.Direction={X:0,Y:1,Z:2},n.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},n.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},n.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},i.exports=n}),n("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,e,i){function n(t){this.method=t,this._instances=[],this.state=[]}var o=t("famous/utilities/Utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,e,i){for(var n=o.after(t.length,i),s=0;s<t.length;s++)this._instances[s]||(this._instances[s]=new this.method),this._instances[s].set(t[s],e,n)},n.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=n}),n("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function o(t,e,i){return(1-i)*t+i*e}function s(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=n.getCurve(i.curve)),i}function a(t,e,i,n,o){var s,r=1e-7,a=(i(o)-i(o-r))/r;if(t instanceof Array){s=[];for(var c=0;c<t.length;c++)s[c]=a*(t[c]-e[c])/n}else s=a*(t-e)/n;return s}function c(t,e,i){var n;if(t instanceof Array){n=[];for(var s=0;s<t.length;s++)n[s]=o(t[s],e[s],i)}else n=o(t,e,i);return n}n.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:n.Curves.linear,duration:500,speed:0};var u={};n.registerCurve=function(t,e){return u[t]?!1:(u[t]=e,!0)},n.unregisterCurve=function(t){return u[t]?(delete u[t],!0):!1},n.getCurve=function(t){return u[t]},n.getCurves=function(){return u},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=s(this.get()),e=r(e,this.options),e.speed){var n=this._startValue;if(n instanceof Object){var o=0;for(var a in n)o+=(t[a]-n[a])*(t[a]-n[a]);e.duration=Math.sqrt(o)/e.speed}else e.duration=Math.abs(t-n)/e.speed}this._startTime=Date.now(),this._endValue=s(t),this._startVelocity=s(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},n.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=s(t),this.velocity=s(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=c(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",n.Curves.linear),n.registerCurve("easeIn",n.Curves.easeIn),n.registerCurve("easeOut",n.Curves.easeOut),n.registerCurve("easeInOut",n.Curves.easeInOut),n.registerCurve("easeOutBounce",n.Curves.easeOutBounce),n.registerCurve("spring",n.Curves.spring),n.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=n}),n("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function o(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(e=n.method,"string"==typeof e&&(e=a[e])):e=r,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new s(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(i,n,o.bind(this))}var s=t("./MultipleTransition"),r=t("./TweenTransition"),a={};n.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var n=[t,e];return this.actionQueue.push(n),this.callbackQueue.push(i),this.currentAction||o.call(this),this},n.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,e){this.set(this._engineInstance.get(),{duration:t,curve:function(){return 0}},e)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){this.set(this.get())},i.exports=n}),n("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,e,i){function n(t){return[t.clientWidth,t.clientHeight]}function o(t){this.container=t,this._allocator=new a(t),this._node=new s,this._eventOutput=new r,this._size=n(this.container),this._perspectiveState=new u(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:c.identity,opacity:1,origin:h,size:this._size},this._eventOutput.on("resize",function(){this.setSize(n(this.container))}.bind(this))}var s=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),c=t("./Transform"),u=t("famous/transitions/Transitionable"),h=[0,0];o.prototype.getAllocator=function(){return this._allocator},o.prototype.add=function(t){return this._node.add(t)},o.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},o.prototype.getSize=function(){return this._size},o.prototype.setSize=function(t){t||(t=n(this.container)),this._size[0]=t[0],this._size[1]=t[1]},o.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(this.container.style.perspective=e?e.toFixed()+"px":"",this.container.style.webkitPerspective=e?e.toFixed():"",this._perspective=e),this._node.commit(this._nodeContext)},o.prototype.getPerspective=function(){return this._perspectiveState.get()},o.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},o.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},o.prototype.on=function(t,e){return this._eventOutput.on(t,e)},o.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},o.prototype.pipe=function(t){return this._eventOutput.pipe(t)},o.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)
},i.exports=o}),n("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function n(t){this._value=t,this.eventOutput=null}function o(){this.eventOutput=new s,this.eventOutput.bindThis(this),s.setOutputHandler(this,this.eventOutput)}var s=t("./EventHandler");n.patch=function(t){for(var e=new n(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},n.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)n in t&&i[n]&&i[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(i[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,i[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var e=new n(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},n.prototype.get=function(t){return this._value[t]},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},n.prototype.value=function(){return this._value},n.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return o.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return o.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),n("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function n(){v.runLoop?(h.step(),requestAnimationFrame(n)):m=!1}function o(t){if(document.activeElement&&"INPUT"===document.activeElement.nodeName)return void document.activeElement.addEventListener("blur",function i(){this.removeEventListener("blur",i),o(t)});window.scrollTo(0,0);for(var e=0;e<l.length;e++)l[e].emit("resize");y.emit("resize")}var s,r,a=t("./Context"),c=t("./EventHandler"),u=t("./OptionsManager"),h={},l=[],p=[],f=[],d=Date.now(),m=!0,g={},y=new c,v={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},_=new u(v),w=10;h.step=function(){var t=Date.now();if(!(r&&r>t-d)){var e=0;for(s=t-d,d=t,y.emit("prerender"),e=0;e<p.length;e++)p[e].call(this);for(p.splice(0);f.length&&Date.now()-t<w;)f.shift().call(this);for(e=0;e<l.length;e++)l[e].update();y.emit("postrender")}},requestAnimationFrame(n),window.addEventListener("resize",o,!1),o(),window.addEventListener("touchmove",function(t){t.preventDefault()},!0),h.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(h):y.pipe(t)},h.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(h):y.unpipe(t)},h.on=function(t,e){return t in g||(g[t]=y.emit.bind(y,t),document.body.addEventListener(t,g[t])),y.on(t,e)},h.emit=function(t,e){return y.emit(t,e)},h.removeListener=function(t,e){return y.removeListener(t,e)},h.getFPS=function(){return 1e3/s},h.setFPSCap=function(t){r=Math.floor(1e3/t)},h.getOptions=function(){return _.getOptions.apply(_,arguments)},h.setOptions=function(){return _.setOptions.apply(_,arguments)},h.createContext=function(t){if(void 0===t)t=document.createElement(v.containerType),t.classList.add(v.containerClass),document.body.appendChild(t);else if(!(t instanceof Element))throw t=document.createElement(v.containerType),new Error("Tried to create context on non-existent element");var e=new a(t);return h.registerContext(e),e},h.registerContext=function(t){return l.push(t),t},h.nextTick=function(t){p.push(t)},h.defer=function(t){f.push(t)},_.on("change",function(t){"fpsCap"===t.id?h.setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,requestAnimationFrame(n))}),i.exports=h}),n("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function n(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new f,this.eventHandler.bindThis(this),this.id=p.register(this),t&&this.setOptions(t),this._currTarget=null}function o(t){for(var e in this.eventHandler.listeners)t.addEventListener(e,this.eventForwarder)}function s(t){for(var e in this.eventHandler.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function a(t){for(var e in this.properties)t.style[e]=this.properties[e]}function c(t){for(var e in this.properties)t.style[e]=""}function u(t){for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function h(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}function l(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var p=t("./Entity"),f=t("./EventHandler"),d=t("./Transform"),m=void 0!==document.body.style.webkitTransform;n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.on=function(t,e){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,e)},n.prototype.removeListener=function(t,e){this.eventHandler.removeListener(t,e)},n.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this.eventHandler.emit(t,e);return i&&e.stopPropagation&&e.stopPropagation(),i},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},n.prototype.render=function(){return this.id},n.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},n.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},n.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e])},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var g=m?function(t,e){t.style.webkitTransform=u(e)}:function(t,e){t.style.transform=u(e)},y=m?function(t,e){t.style.webkitTransformOrigin=h(e)}:function(t,e){t.style.transformOrigin=h(e)},v=m?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0};n.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",o.call(this,e),y(e,[0,0]),this._currTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=null,this._opacity=void 0,this._origin=null,this._size=null},n.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var e=this._currTarget,i=t.transform,n=t.opacity,o=t.origin,s=t.size;if(this.size){var c=s;s=[this.size[0],this.size[1]],void 0===s[0]&&c[0]&&(s[0]=c[0]),void 0===s[1]&&c[1]&&(s[1]=c[1])}if(l(this._size,s)&&(this._size=[s[0],s[1]],this._sizeDirty=!0),!i&&this._matrix)return this._matrix=null,this._opacity=0,void v(e);if(this._opacity!==n&&(this._opacity=n,e.style.opacity=n>=1?"0.999999":n),l(this._origin,o)||d.notEquals(this._matrix,i)){i||(i=d.identity),this._matrix=i;var u=i;o&&(this._origin||(this._origin=[0,0]),this._origin[0]=o[0],this._origin[1]=o[1],u=d.moveThen([-this._size[0]*o[0],-this._size[1]*o[1],0],i)),g(e,u)}if(this._classesDirty||this._stylesDirty||this._sizeDirty||this._contentDirty){if(this._classesDirty){r.call(this,e);for(var h=this.getClassList(),p=0;p<h.length;p++)e.classList.add(h[p]);this._classesDirty=!1}this._stylesDirty&&(a.call(this,e),this._stylesDirty=!1),this._sizeDirty&&(this._size&&(e.style.width=this._size[0]!==!0?this._size[0]+"px":"",e.style.height=this._size[1]!==!0?this._size[1]+"px":""),this._sizeDirty=!1),this._contentDirty&&(this.deploy(e),this.eventHandler.emit("deploy"),this._contentDirty=!1)}},n.prototype.cleanup=function(t){var e=0,i=this._currTarget;this.eventHandler.emit("recall"),this.recall(i),i.style.display="none",i.style.width="",i.style.height="",this._size=null,c.call(this,i);var n=this.getClassList();for(r.call(this,i),e=0;e<n.length;e++)i.classList.remove(n[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);s.call(this,i),this._currTarget=null,t.deallocate(i),v(i)},n.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},n.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},n.prototype.getSize=function(t){return t?this._size:this.size||this._size},n.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},i.exports=n}),n("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,e,i){function n(t){this._final=r.identity.slice(),this.translate=new s([0,0,0]),this.rotate=new s([0,0,0]),this.skew=new s([0,0,0]),this.scale=new s([1,1,1]),t&&this.set(t)}function o(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var s=t("./Transitionable"),r=t("famous/core/Transform"),a=t("famous/utilities/Utility");n.prototype.setTranslate=function(t,e,i){return this.translate.set(t,e,i),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},n.prototype.setScale=function(t,e,i){return this.scale.set(t,e,i),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},n.prototype.setRotate=function(t,e,i){return this.rotate.set(t,e,i),this._final=o.call(this),this._final=r.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},n.prototype.setSkew=function(t,e,i){return this.skew.set(t,e,i),this._final=r.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},n.prototype.set=function(t,e,i){this._final=t;var n=r.interpret(t),o=i?a.after(4,i):null;return this.translate.set(n.translate,e,o),this.rotate.set(n.rotate,e,o),this.skew.set(n.skew,e,o),this.scale.set(n.scale,e,o),this},n.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},n.prototype.get=function(){return this.isActive()?o.call(this):this._final},n.prototype.getFinal=function(){return this._final},n.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},n.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},i.exports=n}),n("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function n(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:s.identity,opacity:1,origin:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.size&&this.sizeFrom(t.size))}function o(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var s=t("./Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");n.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},n.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},n.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},n.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},n.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},n.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},n.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},n.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},n.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._sizeGetter=null},n.prototype.getTransform=function(){return this._transformGetter()},n.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},n.prototype.getOpacity=function(){return this._opacityGetter()},n.prototype.getOrigin=function(){return this._originGetter()},n.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},n.prototype.modify=function(t){return o.call(this),this._output.target=t,this._output},i.exports=n}),n("famous/views/HeaderFooterLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/OptionsManager"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._entityId=a.register(this),this.header=new c,this.footer=new c,this.content=new c}function o(t,e){var i=t.getSize();return i?i[this.options.direction]:e}function s(t){return this.options.direction==n.DIRECTION_X?u.translate(t,0,0):u.translate(0,t,0)}function r(t,e){return this.options.direction==n.DIRECTION_X?[t,e[1]]:[e[0],t]}var a=t("famous/core/Entity"),c=t("famous/core/RenderNode"),u=t("famous/core/Transform"),h=t("famous/core/OptionsManager");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DEFAULT_OPTIONS={direction:n.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},n.prototype.render=function(){return this._entityId},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.commit=function(t){var e=t.transform,i=t.origin,n=t.size,a=t.opacity,c=void 0!==this.options.headerSize?this.options.headerSize:o.call(this,this.header,this.options.defaultHeaderSize),h=void 0!==this.options.footerSize?this.options.footerSize:o.call(this,this.footer,this.options.defaultFooterSize),l=n[this.options.direction]-c-h;n&&(e=u.moveThen([-n[0]*i[0],-n[1]*i[1],0],e));var p=[{size:r.call(this,c,n),target:this.header.render()},{transform:s.call(this,c),size:r.call(this,l,n),target:this.content.render()},{transform:s.call(this,c+l),size:r.call(this,h,n),target:this.footer.render()}],f={transform:e,opacity:a,size:n,target:p};return f},i.exports=n}),n("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(t,e,i){function n(t){o.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new s(this._container),this.setContent(this._container)}var o=t("famous/core/Surface"),s=t("famous/core/Context");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),o.prototype.render.apply(this,arguments)},n.prototype.deploy=function(){return this._shouldRecalculateSize=!0,o.prototype.deploy.apply(this,arguments)},n.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,e=o.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),e},i.exports=n}),n("famous/core/Scene",["require","exports","module","./Transform","./Modifier","./RenderNode"],function(t,e,i){function n(t){this.id=null,this._objects=null,this.node=new h,this._definition=null,t&&this.load(t)}function o(t){for(var e in l)if(e in t){var i=t[e];return i instanceof Array||(i=[i]),l[e].apply(this,i)}}function s(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size,r=c.identity;if(e instanceof Array)if(16===e.length&&"number"==typeof e[0])r=e;else for(var a=0;a<e.length;a++)r=c.multiply(r,o(e[a]));else e instanceof Object&&(r=o(e));var h=new u({transform:r,opacity:i,origin:n,size:s});return h}function r(t){for(var e=new h,i=0;i<t.length;i++){var n=a.call(this,t[i]);n&&e.add(n)}return e}function a(t){var e,i;if(t instanceof Array)e=r.call(this,t);else if(i=this._objects.length,t.render&&t.render instanceof Function)e=t;else if(t.target){var n=a.call(this,t.target),o=s.call(this,t);e=new h(o),e.add(n),t.id&&(this.id[t.id]=o)}else t.id&&(e=new h,this.id[t.id]=e);return this._objects[i]=e,e}var c=t("./Transform"),u=t("./Modifier"),h=t("./RenderNode"),l={translate:c.translate,rotate:c.rotate,rotateX:c.rotateX,rotateY:c.rotateY,rotateZ:c.rotateZ,rotateAxis:c.rotateAxis,scale:c.scale,skew:c.skew,matrix3d:function(){return arguments}};n.prototype.create=function(){return new n(this._definition)},n.prototype.load=function(t){this._definition=t,this.id={},this._objects=[],this.node.set(a.call(this,t))},n.prototype.add=function(){return this.node.add.apply(this.node,arguments)},n.prototype.render=function(){return this.node.render.apply(this.node,arguments)},i.exports=n}),n("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(t,e,i){function n(t){this._node=new r,this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t)}var o=t("./EventHandler"),s=t("./OptionsManager"),r=t("./RenderNode");n.DEFAULT_OPTIONS={},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.add=function(){return this._node.add.apply(this._node,arguments)},n.prototype._add=n.prototype.add,n.prototype.render=function(){return this._node.render()},n.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=n}),n("widgets/common/NavigationBar",["require","exports","module","famous/core/Scene","famous/core/Surface","famous/core/Transform","famous/core/View"],function(t,e,i){function n(){a.apply(this,arguments),this.title=new s({classes:this.options.classes,content:this.options.content}),this.back=new s({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new s({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new o({id:"master",size:this.options.size,target:[{transform:r.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:r.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(t){var e=t.id,i=t.value;"size"===e?(this.layout.id.master.setSize(i),this.title.setSize(i),this.back.setSize([i[1],i[1]]),this.more.setSize([i[1],i[1]])):"backClasses"===e?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):"backContent"===e?this.back.setContent(this.options.backContent):"classes"===e?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):"content"===e?this.setContent(this.options.content):"moreClasses"===e?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):"moreContent"===e&&this.more.setContent(this.options.content)}.bind(this))}var o=t("famous/core/Scene"),s=t("famous/core/Surface"),r=t("famous/core/Transform"),a=t("famous/core/View");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={size:[void 0,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},n.prototype.setContent=function(t){return this.title.setContent(t)},n.prototype.setBackButtonEnabled=function(t){t?this.back.removeClass("disabled"):this.back.addClass("disabled")},n.prototype.setMoreButtonEnabled=function(t){t?this.more.removeClass("disabled"):this.more.addClass("disabled")},i.exports=n}),n("famous/views/RenderController",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(t,e,i){function n(){u.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=n.DefaultMap.transform,this.inOpacityMap=n.DefaultMap.opacity,this.inOriginMap=n.DefaultMap.origin,this.outTransformMap=n.DefaultMap.transform,this.outOpacityMap=n.DefaultMap.opacity,this.outOriginMap=n.DefaultMap.origin,this._output=[]}function o(t,e){return t(e.get())}var s=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/core/Transform"),c=t("famous/transitions/Transitionable"),u=t("famous/core/View");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},n.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null},n.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},n.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},n.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},n.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},n.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},n.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},n.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,i),this._nextRenderable=null})));this.hide(i)}var n=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,n=this._states[a],n.halt();var u=this._outgoingRenderables.indexOf(t);u>=0&&this._outgoingRenderables.splice(u,1)}else{n=new c(0);var h=new s({transform:this.inTransformMap?o.bind(this,this.inTransformMap,n):null,opacity:this.inOpacityMap?o.bind(this,this.inOpacityMap,n):null,origin:this.inOriginMap?o.bind(this,this.inOriginMap,n):null}),l=new r;l.add(h).add(t),this._showing=this._nodes.length,this._nodes.push(l),this._modifiers.push(h),this._states.push(n),this._renderables.push(t)}e||(e=this.options.inTransition),n.set(1,e,i)},n.prototype.hide=function(t,e){if(!(this._showing<0)){var i=this._showing;this._showing=-1,t instanceof Function&&(e=t,t=void 0);var n=this._nodes[i],s=this._modifiers[i],r=this._states[i],a=this._renderables[i];s.transformFrom(this.outTransformMap?o.bind(this,this.outTransformMap,r):null),s.opacityFrom(this.outOpacityMap?o.bind(this,this.outOpacityMap,r):null),s.originFrom(this.outOriginMap?o.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,i,n,o){if(this._outgoingRenderables.indexOf(o)>=0){var s=this._nodes.indexOf(t);this._nodes.splice(s,1),this._modifiers.splice(s,1),this._states.splice(s,1),this._renderables.splice(s,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(o),1),this._showing>=s&&this._showing--}e&&e.call(this)}.bind(this,n,s,r,a))}},n.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var e=0;e<this._nodes.length;e++)t[e]=this._nodes[e].render();return t},i.exports=n}),n("activity/common/ActivityHolder",["require","exports","module","famous/core/Surface","famous/core/View","famous/utilities/Utility","famous/views/RenderController","famous/core/Transform","famous/transitions/Transitionable","famous/core/Engine"],function(t,e,i){function n(){o.apply(this,arguments),this.renderController=new s({inTransition:this.options.inTransition,outTransition:this.options.outTransition}),this._activityCache={},this.currentActivity=void 0,this.add(this.renderController)}{var o=(t("famous/core/Surface"),t("famous/core/View")),s=(t("famous/utilities/Utility"),t("famous/views/RenderController")),r=t("famous/core/Transform");t("famous/transitions/Transitionable"),t("famous/core/Engine")}n.DEFAULT_OPTIONS={inTransition:{duration:300,curve:"easeIn"},outTransition:{duration:300,curve:"easeIn"}},n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.ANIMATION={slideFromRight:{transformIn:function(t){return r.translate((1-t)*window.innerWidth,0)},transformOut:function(t){return r.translate((t-1)*window.innerWidth,0)},opacityIn:function(){return 1},opacityOut:function(){return 1}},slideFromLeft:{transformIn:function(t){return r.translate((t-1)*window.innerWidth,0)},transformOut:function(t){return r.translate((1-t)*window.innerWidth,0)},opacityIn:function(){return 1},opacityOut:function(){return 1}},fadeIn:{transformIn:function(){return r.identity},transformOut:function(){return r.identity},opacityIn:function(t){return t},opacityOut:function(){return 1}}},n.prototype.showActivity=function(t,e,i){e||(e=this.ANIMATION.slideFromRight),this.renderController.inTransformFrom(e.transformIn),this.renderController.outTransformFrom(e.transformOut),this.renderController.inOpacityFrom(e.opacityIn),this.renderController.outOpacityFrom(e.opacityIn),t.beforeOpening(window.App,i),t.prepareBottomToolbar(window.App,window.App.bottomToolbar),t.prepareNavigationBar(window.App,window.App.header),window.App.header.setBackButtonEnabled(t.onBackAction!==!1),window.App.header.setMoreButtonEnabled(t.onMoreAction!==!1),this.currentActivity&&window.App.contentContainer.removeClass("activity-"+this.currentActivity.constructor.name),window.App.contentContainer.addClass("activity-"+t.constructor.name),this.currentActivity=t,this.renderController.show(t)},n.prototype.showCachedActivity=function(t,e,i){var n=this.getCachedActivity(t);return n?void this.showActivity(n,e,i):void window.console.error("Unable to find activity "+t+" in cache")},n.prototype.cacheActivity=function(t,e){return e||(e=""),this._activityCache[e]=t,e},n.prototype.getCachedActivity=function(t){return this._activityCache[t]},n.prototype.createActivity=function(t,e){e||(e={}),e.size=this.getSize();var i=new t(e,window.App);return i},n.prototype.createCachedActivity=function(t,e){this.cacheActivity(this.createActivity(t,e),t.name)},i.exports=n}),n("famous/core/ViewSequence",["require","exports","module"],function(t,e,i){function n(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),this._previousNode=null,this._nextNode=null}n.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null},n.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return 0>e||e>=this.array.length?null:this.array[e]},n.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},n.Backing.prototype.reindex=function(t,e,i){var n=0,o=this.firstIndex,s=i-e,r=this.firstNode;if(t===this.firstIndex){for(var n=0;e>n;n++)this.firstNode=this.firstNode.getNext();this.firstNode.index=this.firstIndex
}for(;t-1>o;)r=r.getNext(),o++;var a=r;for(n=0;e>n;n++)r=r.getNext(),r&&(r._previousNode=a);var c=r?r.getNext():null;for(a._nextNode=null,r=a,n=0;i>n;n++)r=r.getNext();if(o+=i,r!==c&&(r._nextNode=c,c&&(c._previousNode=r)),c)for(r=c,o++;r&&o<this.array.length+this.firstIndex;)r._nextNode?r.index+=s:r.index=o,r=r.getNext(),o++},n.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},n.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},n.prototype.getIndex=function(){return this.index},n.prototype.toString=function(){return""+this.index},n.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length},n.prototype.push=function(){this._.array.push.apply(this._.array,arguments)},n.prototype.splice=function(t,e){var i=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(i)),this._.reindex(t,e,i.length)},n.prototype.swap=function(t){var e=t.get(),i=this.get();this._.setValue(this.index,e),this._.setValue(t.index,i);var n=this._previousNode,o=this._nextNode,s=this.index,r=t._previousNode,a=t._nextNode,c=t.index;this.index=c,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=s,t._previousNode=n===t?this:n,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=o===t?this:o,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t)},n.prototype.get=function(){return this._.getValue(this.index)},n.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},n.prototype.render=function(){var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=n}),n("famous/views/SequentialLayout",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/core/ViewSequence","famous/utilities/Utility"],function(t,e,i){function n(t){this._items=null,this._size=null,this._outputFunction=n.DEFAULT_OUTPUT_FUNCTION,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new o(this.options),t&&this.setOptions(t)}var o=t("famous/core/OptionsManager"),s=t("famous/core/Transform"),r=t("famous/core/ViewSequence"),a=t("famous/utilities/Utility");n.DEFAULT_OPTIONS={direction:a.Direction.Y,defaultItemSize:[50,50]},n.DEFAULT_OUTPUT_FUNCTION=function(t,e){var i=this.options.direction===a.Direction.X?s.translate(e,0):s.translate(0,e);return{transform:i,target:t.render()}},n.prototype.getSize=function(){return this._size||this.render(),this._size},n.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new r(t)),this._items=t,this},n.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},n.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},n.prototype.render=function(){for(var t=0,e=0,i=this.options.direction===a.Direction.X?0:1,n=this.options.direction===a.Direction.X?1:0,o=this._items,s=[];o;){var r,c=o.get();c&&c.getSize&&(r=c.getSize()),r||(r=this.options.defaultItemSize),r[n]!==!0&&(e=Math.max(e,r[n]));var u=this._outputFunction.call(this,c,t,s.length);s.push(u),r[i]&&r[i]!==!0&&(t+=r[i]),o=o.getNext()}return e||(e=void 0),this._size||(this._size=[0,0]),this._size[i]=t,this._size[n]=e,{size:this.getSize(),target:s}},i.exports=n}),n("widgets/common/BottomToolbar",["require","exports","module","famous/core/Surface","famous/views/SequentialLayout","famous/surfaces/ContainerSurface","famous/core/View","famous/core/Modifier","famous/core/Transform","famous/utilities/Utility"],function(t,e,i){function n(t){r.apply(this,arguments),t&&this.setOptions(t);var e=new s({classes:this.options.classes}),i=new o({direction:u.Direction.X});this.items=[];var n=this.items;i.sequenceFrom(n);for(var h=[void 0,this.getSize()[1]],l=0;l<t.items.length;l++){var p=t.items[l];this.options.autosize&&(p.size=h),this._eventOutput.subscribe(p),n.push(p)}var f=new a({transform:c.translate(.5,0),origin:[.5,0]});e.add(f).add(i),this.add(e)}var o=(t("famous/core/Surface"),t("famous/views/SequentialLayout")),s=t("famous/surfaces/ContainerSurface"),r=t("famous/core/View"),a=t("famous/core/Modifier"),c=t("famous/core/Transform"),u=t("famous/utilities/Utility");n.DEFAULT_OPTIONS={size:[void 0,50],classes:["bottom-navigation"],items:[],autosize:!0},n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.setActiveItem=function(t){for(var e=0;e<this.items.length;e++)this.items[e].setActiveState(this.items[e]===t)},i.exports=n}),function(){var t=this,e=t._,i={},o=Array.prototype,s=Object.prototype,r=Function.prototype,a=o.push,c=o.slice,u=o.concat,h=s.toString,l=s.hasOwnProperty,p=o.forEach,f=o.map,d=o.reduce,m=o.reduceRight,g=o.filter,y=o.every,v=o.some,_=o.indexOf,w=o.lastIndexOf,b=Array.isArray,O=Object.keys,S=r.bind,x=function(t){return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(t,e,n){if(null==t)return t;if(p&&t.forEach===p)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;s>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var r=x.keys(t),o=0,s=r.length;s>o;o++)if(e.call(n,t[r[o]],r[o],t)===i)return;return t};x.map=x.collect=function(t,e,i){var n=[];return null==t?n:f&&t.map===f?t.map(e,i):(T(t,function(t,o,s){n.push(e.call(i,t,o,s))}),n)};var C="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return n&&(e=x.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(T(t,function(t,s,r){o?i=e.call(n,i,t,s,r):(i=t,o=!0)}),!o)throw new TypeError(C);return i},x.reduceRight=x.foldr=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return n&&(e=x.bind(e,n)),o?t.reduceRight(e,i):t.reduceRight(e);var s=t.length;if(s!==+s){var r=x.keys(t);s=r.length}if(T(t,function(a,c,u){c=r?r[--s]:--s,o?i=e.call(n,i,t[c],c,u):(i=t[c],o=!0)}),!o)throw new TypeError(C);return i},x.find=x.detect=function(t,e,i){var n;return E(t,function(t,o,s){return e.call(i,t,o,s)?(n=t,!0):void 0}),n},x.filter=x.select=function(t,e,i){var n=[];return null==t?n:g&&t.filter===g?t.filter(e,i):(T(t,function(t,o,s){e.call(i,t,o,s)&&n.push(t)}),n)},x.reject=function(t,e,i){return x.filter(t,function(t,n,o){return!e.call(i,t,n,o)},i)},x.every=x.all=function(t,e,n){e||(e=x.identity);var o=!0;return null==t?o:y&&t.every===y?t.every(e,n):(T(t,function(t,s,r){return(o=o&&e.call(n,t,s,r))?void 0:i}),!!o)};var E=x.some=x.any=function(t,e,n){e||(e=x.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,n):(T(t,function(t,s,r){return o||(o=e.call(n,t,s,r))?i:void 0}),!!o)};x.contains=x.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):E(t,function(t){return t===e})},x.invoke=function(t,e){var i=c.call(arguments,2),n=x.isFunction(e);return x.map(t,function(t){return(n?e:t[e]).apply(t,i)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matches(e))},x.findWhere=function(t,e){return x.find(t,x.matches(e))},x.max=function(t,e,i){if(!e&&x.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var n=-1/0,o=-1/0;return T(t,function(t,s,r){var a=e?e.call(i,t,s,r):t;a>o&&(n=t,o=a)}),n},x.min=function(t,e,i){if(!e&&x.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var n=1/0,o=1/0;return T(t,function(t,s,r){var a=e?e.call(i,t,s,r):t;o>a&&(n=t,o=a)}),n},x.shuffle=function(t){var e,i=0,n=[];return T(t,function(t){e=x.random(i++),n[i-1]=n[e],n[e]=t}),n},x.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))};var k=function(t){return null==t?x.identity:x.isFunction(t)?t:x.property(t)};x.sortBy=function(t,e,i){return e=k(e),x.pluck(x.map(t,function(t,n,o){return{value:t,index:n,criteria:e.call(i,t,n,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var z=function(t){return function(e,i,n){var o={};return i=k(i),T(e,function(s,r){var a=i.call(n,s,r,e);t(o,a,s)}),o}};x.groupBy=z(function(t,e,i){x.has(t,e)?t[e].push(i):t[e]=[i]}),x.indexBy=z(function(t,e,i){t[e]=i}),x.countBy=z(function(t,e){x.has(t,e)?t[e]++:t[e]=1}),x.sortedIndex=function(t,e,i,n){i=k(i);for(var o=i.call(n,e),s=0,r=t.length;r>s;){var a=s+r>>>1;i.call(n,t[a])<o?s=a+1:r=a}return s},x.toArray=function(t){return t?x.isArray(t)?c.call(t):t.length===+t.length?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:t.length===+t.length?t.length:x.keys(t).length},x.first=x.head=x.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:c.call(t,0,e)},x.initial=function(t,e,i){return c.call(t,0,t.length-(null==e||i?1:e))},x.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},x.rest=x.tail=x.drop=function(t,e,i){return c.call(t,null==e||i?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var I=function(t,e,i){return e&&x.every(t,x.isArray)?u.apply(i,t):(T(t,function(t){x.isArray(t)||x.isArguments(t)?e?a.apply(i,t):I(t,e,i):i.push(t)}),i)};x.flatten=function(t,e){return I(t,e,[])},x.without=function(t){return x.difference(t,c.call(arguments,1))},x.partition=function(t,e){var i=[],n=[];return T(t,function(t){(e(t)?i:n).push(t)}),[i,n]},x.uniq=x.unique=function(t,e,i,n){x.isFunction(e)&&(n=i,i=e,e=!1);var o=i?x.map(t,i,n):t,s=[],r=[];return T(o,function(i,n){(e?n&&r[r.length-1]===i:x.contains(r,i))||(r.push(i),s.push(t[n]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(t){var e=c.call(arguments,1);return x.filter(x.uniq(t),function(t){return x.every(e,function(e){return x.contains(e,t)})})},x.difference=function(t){var e=u.apply(o,c.call(arguments,1));return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){for(var t=x.max(x.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=x.pluck(arguments,""+i);return e},x.object=function(t,e){if(null==t)return{};for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},x.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=x.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}if(_&&t.indexOf===_)return t.indexOf(e,i);for(;o>n;n++)if(t[n]===e)return n;return-1},x.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(w&&t.lastIndexOf===w)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var o=n?i:t.length;o--;)if(t[o]===e)return o;return-1},x.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,s=new Array(n);n>o;)s[o++]=t,t+=i;return s};var M=function(){};x.bind=function(t,e){var i,n;if(S&&t.bind===S)return S.apply(t,c.call(arguments,1));if(!x.isFunction(t))throw new TypeError;return i=c.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(c.call(arguments)));M.prototype=t.prototype;var o=new M;M.prototype=null;var s=t.apply(o,i.concat(c.call(arguments)));return Object(s)===s?s:o}},x.partial=function(t){var e=c.call(arguments,1);return function(){for(var i=0,n=e.slice(),o=0,s=n.length;s>o;o++)n[o]===x&&(n[o]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},x.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return T(e,function(e){t[e]=x.bind(t[e],t)}),t},x.memoize=function(t,e){var i={};return e||(e=x.identity),function(){var n=e.apply(this,arguments);return x.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},x.delay=function(t,e){var i=c.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},x.defer=function(t){return x.delay.apply(x,[t,1].concat(c.call(arguments,1)))},x.throttle=function(t,e,i){var n,o,s,r=null,a=0;i||(i={});var c=function(){a=i.leading===!1?0:x.now(),r=null,s=t.apply(n,o),n=o=null};return function(){var u=x.now();a||i.leading!==!1||(a=u);var h=e-(u-a);return n=this,o=arguments,0>=h?(clearTimeout(r),r=null,a=u,s=t.apply(n,o),n=o=null):r||i.trailing===!1||(r=setTimeout(c,h)),s}},x.debounce=function(t,e,i){var n,o,s,r,a,c=function(){var u=x.now()-r;e>u?n=setTimeout(c,e-u):(n=null,i||(a=t.apply(s,o),s=o=null))};return function(){s=this,o=arguments,r=x.now();var u=i&&!n;return n||(n=setTimeout(c,e)),u&&(a=t.apply(s,o),s=o=null),a}},x.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},x.wrap=function(t,e){return x.partial(e,t)},x.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},x.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},x.keys=function(t){if(!x.isObject(t))return[];if(O)return O(t);var e=[];for(var i in t)x.has(t,i)&&e.push(i);return e},x.values=function(t){for(var e=x.keys(t),i=e.length,n=new Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},x.pairs=function(t){for(var e=x.keys(t),i=e.length,n=new Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},x.invert=function(t){for(var e={},i=x.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},x.functions=x.methods=function(t){var e=[];for(var i in t)x.isFunction(t[i])&&e.push(i);return e.sort()},x.extend=function(t){return T(c.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},x.pick=function(t){var e={},i=u.apply(o,c.call(arguments,1));return T(i,function(i){i in t&&(e[i]=t[i])}),e},x.omit=function(t){var e={},i=u.apply(o,c.call(arguments,1));for(var n in t)x.contains(i,n)||(e[n]=t[n]);return e},x.defaults=function(t){return T(c.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t};var A=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var o=h.call(t);if(o!=h.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]==t)return n[s]==e;var r=t.constructor,a=e.constructor;if(r!==a&&!(x.isFunction(r)&&r instanceof r&&x.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;i.push(t),n.push(e);var c=0,u=!0;if("[object Array]"==o){if(c=t.length,u=c==e.length)for(;c--&&(u=A(t[c],e[c],i,n)););}else{for(var l in t)if(x.has(t,l)&&(c++,!(u=x.has(e,l)&&A(t[l],e[l],i,n))))break;if(u){for(l in e)if(x.has(e,l)&&!c--)break;u=!c}}return i.pop(),n.pop(),u};x.isEqual=function(t,e){return A(t,e,[],[])},x.isEmpty=function(t){if(null==t)return!0;if(x.isArray(t)||x.isString(t))return 0===t.length;for(var e in t)if(x.has(t,e))return!1;return!0},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=b||function(t){return"[object Array]"==h.call(t)},x.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){x["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return!(!t||!x.has(t,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(t){return"function"==typeof t}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!=+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return l.call(t,e)},x.noConflict=function(){return t._=e,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.property=function(t){return function(e){return e[t]}},x.matches=function(t){return function(e){if(e===t)return!0;for(var i in t)if(t[i]!==e[i])return!1;return!0}},x.times=function(t,e,i){for(var n=Array(Math.max(0,t)),o=0;t>o;o++)n[o]=e.call(i,o);return n},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=x.invert(P.escape);var F={escape:new RegExp("["+x.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(P.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(t){x[t]=function(e){return null==e?"":(""+e).replace(F[t],function(e){return P[t][e]})}}),x.result=function(t,e){if(null==t)return void 0;var i=t[e];return x.isFunction(i)?i.call(t):i},x.mixin=function(t){T(x.functions(t),function(e){var i=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),H.call(this,i.apply(x,t))}})};var N=0;x.uniqueId=function(t){var e=++N+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(t,e,i){var n;i=x.defaults({},i,x.templateSettings);var o=new RegExp([(i.escape||D).source,(i.interpolate||D).source,(i.evaluate||D).source].join("|")+"|$","g"),s=0,r="__p+='";t.replace(o,function(e,i,n,o,a){return r+=t.slice(s,a).replace(R,function(t){return"\\"+L[t]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\n__p+='"),s=a+e.length,e}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(e)return n(e,x);var c=function(t){return n.call(this,t,x)};return c.source="function("+(i.variable||"obj")+"){\n"+r+"}",c},x.chain=function(t){return x(t).chain()};var H=function(t){return this._chain?x(t).chain():t};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];x.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],H.call(this,i)}}),T(["concat","join","slice"],function(t){var e=o[t];x.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof n&&n.amd&&n("underscore",[],function(){return x})}.call(this),n("widgets/common/BottomToolbarItem",["require","exports","module","famous/core/Surface","famous/core/View","underscore"],function(t,e,i){function n(t){s.apply(this,arguments),t&&this.setOptions(t),this._surface=new o({origin:[.5,.5],size:this.options.size,classes:this.options.classes,content:this._itemRenderer(this.options)}),this.id=this.options.id,this._surface.on("click",function(){this.options.onClick&&this.options.onClick(this),this._eventOutput.emit("toolbar-item-clicked",{target:this})}.bind(this)),this._add(this._surface)}var o=t("famous/core/Surface"),s=t("famous/core/View"),r=t("underscore");n.DEFAULT_OPTIONS={size:[100,void 0],classes:["toolbar-item"],iconClass:void 0,text:void 0,id:void 0,onClick:function(){}},n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setActiveState=function(t){var e=r.without(this._surface.getClassList(),"active");t&&e.push("active"),this._surface.setClasses(e)},n.prototype._itemRenderer=r.template('<div id="<%= id %>"><div class="toolbar-icon <%= iconClass %>"></div><div><%= text %></div></div>'),i.exports=n}),n("activity/common/Activity",["require","exports","module","famous/core/View"],function(t,e,i){function n(){o.apply(this,arguments)}var o=t("famous/core/View");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.beforeOpening=function(){},n.prototype.prepareNavigationBar=function(){},n.prototype.prepareBottomToolbar=function(){},n.prototype.onBackAction=!1,n.prototype.onMoreAction=!1,i.exports=n}),n("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._timestamp=17,this._minTimeStep=1e3/120,this._maxTimestep=17,this._prevTime=w(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function o(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function s(t,e,i){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),this._agents[this._currAgentId]={agent:t,targets:e,source:i},o.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agents[t]}function a(t){var e=r.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function c(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function u(t,e){var i=this._agents[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function h(t){for(var e=0;e<this.options.constraintSteps;){for(var i=this._constraints.length-1;i>-1;i--)u.call(this,i,t);e++}}function l(t,e){t.integrateVelocity(e)}function p(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity()}function f(t,e){t.integrateOrientation(e)}function d(t,e){t.integratePosition(e),t.emit("update",t)}function m(t){c.call(this,t),this.forEach(l,t),this.forEachBody(p,t),h.call(this,t),this.forEachBody(f,t),this.forEach(d,t)}function g(){var t=0,e=0;return this.forEach(function(i){e=i.getEnergy(),t+=e,e<i.sleepTolerance&&i.sleep()}),t}function y(){for(var t=0,e=this._forces.length-1;e>-1;e--)t+=this._forces[e].getEnergy()||0;return t}function v(){for(var t=0,e=this._constraints.length-1;e>-1;e--)t+=this._constraints[e].getEnergy()||0;return t}var _=t("famous/core/EventHandler");n.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var w=function(){return Date.now}();n.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},n.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t},n.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,i=e.indexOf(t);if(i>-1){for(var n=0;n<Object.keys(this._agents);n++)this.detachFrom(n,t);e.splice(i,1)}0===this.getBodies().length&&(this._hasBodies=!1)},n.prototype.attach=function(t,e,i){if(t instanceof Array){for(var n=[],o=0;o<t.length;o++)n[o]=s.call(this,t[o],e,i);return n}return s.call(this,t,e,i)},n.prototype.attachTo=function(t,e){r.call(this,t).targets.push(e)},n.prototype.detach=function(t){var e=this.getAgent(t),i=o.call(this,e),n=i.indexOf(t);i.splice(n,1),delete this._agents[t]},n.prototype.detachFrom=function(t,e){var i=r.call(this,t);if(i.source===e)this.detach(t);else{var n=i.targets,o=n.indexOf(e);o>-1&&n.splice(o,1)}},n.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return r.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getBodies=function(){return this._bodies},n.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},n.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),n=0,o=i.length;o>n;n++)t.call(this,i[n],e)},n.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var i=this.getBodies(),n=0,o=i.length;o>n;n++)t.call(this,i[n],e)},n.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},n.prototype.getEnergy=function(){return g.call(this)+y.call(this)+v.call(this)},n.prototype.step=function(){var t=w(),e=t-this._prevTime;this._prevTime=t,e<this._minTimeStep||(e>this._maxTimeStep&&(e=this._maxTimestep),m.call(this,this._timestamp))},n.prototype.isSleeping=function(){return this._isSleeping},n.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},n.prototype.wake=function(){this._prevTime=w(),this.emit("start",this),this._isSleeping=!1},n.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},n.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new _),this._eventHandler.on(t,e)},i.exports=n}),n("famous/math/Vector",["require","exports","module"],function(t,e,i){function n(t,e,i){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function o(t,e,i){return this.x=t,this.y=e,this.z=i,this}function s(t){return o.call(this,t[0],t[1],t[2]||0)}function r(t){return o.call(this,t.x,t.y,t.z)}function a(t){return o.call(this,t,0,0)}var c=new n(0,0,0);n.prototype.add=function(t){return o.call(c,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return o.call(c,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return o.call(c,t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var e=this.x,i=this.y,n=this.z,s=t.x,r=t.y,a=t.z;return o.call(c,n*r-i*a,e*a-n*s,i*s-e*r)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.rotateX=function(t){var e=this.x,i=this.y,n=this.z,s=Math.cos(t),r=Math.sin(t);return o.call(c,e,i*s-n*r,i*r+n*s)},n.prototype.rotateY=function(t){var e=this.x,i=this.y,n=this.z,s=Math.cos(t),r=Math.sin(t);return o.call(c,n*r+e*s,i,n*s-e*r)},n.prototype.rotateZ=function(t){var e=this.x,i=this.y,n=this.z,s=Math.cos(t),r=Math.sin(t);return o.call(c,e*s-i*r,e*r+i*s,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?r.call(c,this.mult(t/e)):o.call(c,t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?s.call(this,t):t instanceof n?r.call(this,t):"number"==typeof t?a.call(this,t):void 0},n.prototype.setXYZ=function(){return o.apply(this,arguments)},n.prototype.set1D=function(t){return a.call(this,t)},n.prototype.put=function(t){r.call(t,c)},n.prototype.clear=function(){return o.call(this,0,0,0)},n.prototype.cap=function u(u){if(1/0===u)return r.call(c,this);var t=this.norm();return t>u?r.call(c,this.mult(u/t)):r.call(c,this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.normalize().put(t),r(c,this.sub(this.project(t).mult(2)))},n.prototype.get=function(){return[this.x,this.y,this.z]},n.prototype.get1D=function(){return this.x},i.exports=n}),n("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var o=t("famous/core/OptionsManager");n.DEFAULT_OPTIONS={velocityCap:void 0,angularVelocityCap:void 0},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.integrateVelocity=function(t,e){var i=t.velocity,n=t.inverseMass,o=t.force;o.isZero()||(i.add(o.mult(e*n)).put(i),o.clear())},n.prototype.integratePosition=function(t,e){var i=t.position,n=t.velocity;this.options.velocityCap&&n.cap(this.options.velocityCap).put(n),i.add(n.mult(e)).put(i)},n.prototype.integrateAngularMomentum=function(t,e){var i=t.angularMomentum,n=t.torque;n.isZero()||(this.options.angularVelocityCap&&n.cap(this.options.angularVelocityCap).put(n),i.add(n.mult(e)).put(i),n.clear())},n.prototype.integrateOrientation=function(t,e){var i=t.orientation,n=t.angularVelocity;n.isZero()||i.add(i.multiply(n).scalarMultiply(.5*e)).put(i)},i.exports=n}),n("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(t,e,i){function n(t){t=t||{},this.position=new s,this.velocity=new s,this.force=new s;var e=n.DEFAULT_OPTIONS;this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.mass=void 0!==t.mass?t.mass:e.mass,this.axis=void 0!==t.axis?t.axis:e.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=r.identity.slice(),this._spec={transform:this.transform,target:null}}function o(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var s=t("famous/math/Vector"),r=t("famous/core/Transform"),a=t("famous/core/EventHandler"),c=t("../integrators/SymplecticEuler");n.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:void 0},n.SLEEP_TOLERANCE=1e-7,n.AXES={X:0,Y:1,Z:2},n.INTEGRATOR=new c;var u={start:"start",update:"update",end:"end"},h=function(){return Date.now}();n.prototype.sleep=function(){this._isSleeping||(this.emit(u.end,this),this._isSleeping=!0)},n.prototype.wake=function(){this._isSleeping&&(this.emit(u.start,this),this._isSleeping=!1,this._prevTime=h())},n.prototype.isBody=!1,n.prototype.setPosition=function(t){this.position.set(t)},n.prototype.setPosition1D=function(t){this.position.x=t},n.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},n.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},n.prototype.positionFrom=function(t){this._positionGetter=t},n.prototype.setVelocity=function(t){this.velocity.set(t),this.wake()},n.prototype.setVelocity1D=function(t){this.velocity.x=t,this.wake()},n.prototype.getVelocity=function(){return this.velocity.get()},n.prototype.getVelocity1D=function(){return this.velocity.x},n.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},n.prototype.getMass=function(){return this.mass},n.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},n.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},n.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},n.prototype.integrateVelocity=function(t){n.INTEGRATOR.integrateVelocity(this,t)},n.prototype.integratePosition=function(t){n.INTEGRATOR.integratePosition(this,t)},n.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)
},n.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},n.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.axis,i=this.transform;return void 0!==e&&(e&~n.AXES.X&&(t.x=0),e&~n.AXES.Y&&(t.y=0),e&~n.AXES.Z&&(t.z=0)),i[12]=t.x,i[13]=t.y,i[14]=t.z,i},n.prototype.modify=function(t){var e=this._spec;return e.transform=this.getTransform(),e.target=t,e},n.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},n.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return o.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return o.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),n("famous/physics/forces/Force",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(t,e,i){function n(t){this.force=new s(t),this._energy=0,this._eventOutput=null}function o(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var s=t("famous/math/Vector"),r=t("famous/core/EventHandler");n.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},n.prototype.applyForce=function(t){t.applyForce(this.force)},n.prototype.getEnergy=function(){return this._energy},n.prototype.setEnergy=function(t){this._energy=t},n.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},n.prototype.addListener=function(){return o.call(this),this.addListener.apply(this,arguments)},n.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},n.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},n.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},i.exports=n}),n("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),o.call(this)}var o=t("./Force");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.DEFAULT_OPTIONS={strength:.01,forceFunction:n.FORCE_FUNCTIONS.LINEAR},n.prototype.applyForce=function(t){for(var e=this.options.strength,i=this.options.forceFunction,n=this.force,o=0;o<t.length;o++){var s=t[o];i(s.velocity).mult(-e).put(n),s.applyForce(n)}},n.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},i.exports=n}),n("famous/physics/forces/Spring",["require","exports","module","./Force","famous/math/Vector"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new h(0,0,0),c.call(this),u.call(this)}function o(t){this.forceFunction=t}function s(){var t=this.options;t.stiffness=Math.pow(2*l/t.period,2)}function r(){var t=this.options;t.damping=4*l*t.dampingRatio/t.period}function a(t,e){return.5*t*e*e}function c(){o.call(this,this.options.forceFunction),s.call(this),r.call(this)}var u=t("./Force"),h=t("famous/math/Vector");n.prototype=Object.create(u.prototype),n.prototype.constructor=n;var l=Math.PI;n.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,n=Math.max(Math.min(t,i),-i);return n/(1-n*n/(e*e))},HOOK:function(t){return t}},n.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:n.FORCE_FUNCTIONS.HOOK},n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof h&&(this.options.anchor=t.anchor.position),t.anchor instanceof h&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new h(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),c.call(this)},n.prototype.applyForce=function(t,e){for(var i=this.force,n=this.disp,o=this.options,s=o.stiffness,r=o.damping,c=o.length,u=o.maxLength,h=o.anchor||e.position,l=0;l<t.length;l++){var p=t[l],f=p.position,d=p.velocity;h.sub(f).put(n);var m=n.norm()-c;if(0===m)return;var g=p.mass;s*=g,r*=g,n.normalize(s*this.forceFunction(m,u)).put(i),r&&(e?i.add(d.sub(e.velocity).mult(-r)).put(i):i.add(d.mult(-r)).put(i)),p.applyForce(i),e&&e.applyForce(i.mult(-1)),this.setEnergy(a(s,m))}},n.prototype.getEnergy=function(t){var e=this.options,i=e.length,n=e.anchor,o=e.stiffness,s=n.sub(t.position).norm()-i;return.5*o*s*s},n.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new h),this.options.anchor.set(t)},i.exports=n}),n("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function n(t,e,i,n){var o={};for(var s in t)o[s]=t[s];return{touch:o,origin:e,timestamp:Date.now(),count:n,history:i}}function o(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],o=n(i,t.origin,void 0,t.touches.length);this.eventOutput.emit("trackstart",o),this.selective||this.touchHistory[i.identifier]||this.track(o)}}function s(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],o=this.touchHistory[i.identifier];if(o){var s=n(i,t.origin,o,t.touches.length);this.touchHistory[i.identifier].push(s),this.eventOutput.emit("trackmove",s)}}}function r(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],o=this.touchHistory[i.identifier];if(o){var s=n(i,t.origin,o,t.touches.length);this.eventOutput.emit("trackend",s),delete this.touchHistory[i.identifier]}}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function c(t){this.selective=t,this.touchHistory={},this.eventInput=new u,this.eventOutput=new u,u.setInputHandler(this,this.eventInput),u.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",o.bind(this)),this.eventInput.on("touchmove",s.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this))}var u=t("famous/core/EventHandler");c.prototype.track=function(t){this.touchHistory[t.touch.identifier]=[t]},i.exports=c}),n("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,e,i){function n(t,e){2===arguments.length?(this._legacyPositionGetter=arguments[0],e=arguments[1]):(this._legacyPositionGetter=null,e=arguments[0]),this.output=new u,this.touchTracker=new c,this.options={direction:void 0,rails:!1,scale:1},this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this.setOptions(e?e:this.options),u.setOutputHandler(this,this.output),u.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",s.bind(this)),this.touchTracker.on("trackmove",r.bind(this)),this.touchTracker.on("trackend",a.bind(this))}function o(){var t=this._payload;t.position=null,t.velocity=null,t.clientX=void 0,t.clientY=void 0,t.count=void 0,t.touch=void 0}function s(t){o.call(this);var e=this._payload;e.count=t.count,e.touch=t.identifier,this.output.emit("start",e)}function r(t){var e=t.history,i=e[e.length-2].timestamp,o=e[e.length-1].timestamp,s=e[e.length-2].touch,r=e[e.length-1].touch,a=r.pageX-s.pageX,c=r.pageY-s.pageY;this.options.rails&&(Math.abs(a)>Math.abs(c)?c=0:a=0);var u,h,l,p,f=Math.max(o-i,8),d=a/f,m=c/f,g=this.options.scale;this.options.direction===n.DIRECTION_X?(u=this._legacyPositionGetter?this._legacyPositionGetter():0,p=g*a,h=u+p,l=g*d):this.options.direction===n.DIRECTION_Y?(u=this._legacyPositionGetter?this._legacyPositionGetter():0,p=g*c,h=u+p,l=g*m):(u=this._legacyPositionGetter?this._legacyPositionGetter():[0,0],p=[g*a,g*c],h=[u[0]+p[0],u[1]+p[1]],l=[g*d,g*m]);var y=this._payload;y.delta=p,y.position=h,y.velocity=l,y.clientX=t.touch.clientX,y.clientY=t.touch.clientY,y.count=t.count,y.touch=t.touch.identifier,this.output.emit("update",y)}function a(t){var e=void 0!==this.options.direction?0:[0,0],i=t.history,o=t.count;if(i.length>1){var s=i[i.length-2].timestamp,r=i[i.length-1].timestamp,a=i[i.length-2].touch,c=i[i.length-1].touch,u=c.pageX-a.pageX,h=c.pageY-a.pageY;this.options.rails&&(Math.abs(u)>Math.abs(h)?h=0:u=0);var l=Math.max(r-s,1),p=u/l,f=h/l,d=this.options.scale;e=this.options.direction===n.DIRECTION_X?d*p:this.options.direction===n.DIRECTION_Y?d*f:[d*p,d*f]}var m=this._payload;m.velocity=e,m.clientX=t.clientX,m.clientY=t.clientY,m.count=o,m.touch=t.touch.identifier,this.output.emit("end",m)}var c=t("./TouchTracker"),u=t("famous/core/EventHandler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},i.exports=n}),n("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(t,e,i){function n(t,e){2===arguments.length?(this._legacyPositionGetter=arguments[0],e=arguments[1]):(this._legacyPositionGetter=null,e=arguments[0]),this.options={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},this.setOptions(e?e:this.options),this._payload={delta:null,position:null,velocity:null,slip:!0},this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousewheel",s.bind(this)),this.input.on("wheel",s.bind(this)),this.inProgress=!1,this._loopBound=!1}function o(){var t=Date.now();if(this.inProgress&&t-this._prevTime>this.options.stallTime){var e=void 0===this.options.direction?this._legacyPositionGetter?this._legacyPositionGetter:[0,0]:this._legacyPositionGetter?this._legacyPositionGetter:0;this.inProgress=!1;var i=0;Math.abs(this._prevVel)>=this.options.minimumEndSpeed&&(i=this._prevVel);var n=this._payload;n.position=e,n.velocity=i,n.slip=!0,this.output.emit("end",n)}}function s(t){t.preventDefault(),this.inProgress||(this.inProgress=!0,this.output.emit("start",{slip:!0}),this._loopBound||(a.on("prerender",o.bind(this)),this._loopBound=!0));var e=this._prevTime||Date.now(),i=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,s=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(i*=this.options.lineHeight,s*=this.options.lineHeight);var r=Date.now();this.options.rails&&(Math.abs(i)>Math.abs(s)?s=0:i=0);var c,u,h,l,p=Math.max(r-e,8),f=i/p,d=s/p,m=this.options.scale;this.options.direction===n.DIRECTION_X?(c=this._legacyPositionGetter?this._legacyPositionGetter():0,l=m*i,u=c+l,h=m*f):this.options.direction===n.DIRECTION_Y?(c=this._legacyPositionGetter?this._legacyPositionGetter():0,l=m*s,u=c+l,h=m*d):(c=this._legacyPositionGetter?this._legacyPositionGetter():[0,0],l=[m*i,m*s],u=[c[0]+l[0],c[1]+l[1]],h=[m*f,m*d]);var g=this._payload;g.delta=l,g.position=u,g.velocity=h,g.slip=!0,this.output.emit("update",g),this._prevTime=r,this._prevVel=h}var r=t("famous/core/EventHandler"),a=t("famous/core/Engine");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},i.exports=n}),n("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler","./TouchSync","./ScrollSync"],function(t,e,i){function n(t,e){2===arguments.length?this._legacyPositionGetter=t:(this._legacyPositionGetter=null,e=t),this.eventInput=new s,this.eventOutput=new s,s.setInputHandler(this,this.eventInput),s.setOutputHandler(this,this.eventOutput),this._handlers=void 0,e?(this.options=e,e.syncClasses||(this.options.syncClasses=c),this.setOptions(e)):this.options={syncClasses:c},this._handlers&&o.call(this)}function o(){var t=null,e=0;if(this._handlers)for(e=0;e<this._handlers.length;e++)this.eventInput.unpipe(this._handlers[e]),this._handlers[e].unpipe(this.eventOutput);for(this._handlers=[],e=0;e<this.options.syncClasses.length;e++)t=this.options.syncClasses[e],this._handlers[e]=new t(this._legacyPositionGetter,this._handlerOptions),this.eventInput.pipe(this._handlers[e]),this._handlers[e].pipe(this.eventOutput)}var s=t("famous/core/EventHandler"),r=t("./TouchSync"),a=t("./ScrollSync"),c=[r,a];n.register=function(t){c.indexOf(t)<0&&c.push(t)},n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2,n.prototype.setOptions=function(t){if(this._handlerOptions=t,t.syncClasses&&(this.options.syncClasses=t.syncClasses,o.call(this)),this._handlers)for(var e=0;e<this._handlers.length;e++)this._handlers[e].setOptions(this._handlerOptions)},i.exports=n}),n("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,e,i){function n(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new o(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var o=t("./Context"),s=t("./Transform"),r=t("./Surface");n.SIZE_ZERO=[0,0],n.prototype=Object.create(r.prototype),n.prototype.elementType="div",n.prototype.elementClass="famous-group",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return r.prototype.render.call(this)},n.prototype.deploy=function(t){this.context.migrate(t)},n.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},n.prototype.commit=function(t){var e=t.transform,i=t.origin,o=t.opacity,a=t.size,c=r.prototype.commit.call(this,{allocator:t.allocator,transform:s.thenMove(e,[-i[0]*a[0],-i[1]*a[1],0]),opacity:o,origin:i,size:n.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:s.translate(-i[0]*a[0],-i[1]*a[1],0),origin:i,size:a}),c},i.exports=n}),n("famous/views/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new l(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new h,this.group.add({render:c.bind(this)}),this._entityId=u.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new m,this._eventOutput=new m,m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput)}function o(t){t||(t=this._contextSize);var e=this.options.direction===f.Direction.X?0:1;return void 0===t[e]?this._contextSize[e]:t[e]}function s(t,e,i){var n=t.getSize?t.getSize():this._contextSize,s=this._outputFunction(e);return i.push({transform:s,target:t.render()}),o.call(this,n)}function r(){return this.options.clipSize?this.options.clipSize:o.call(this,this._contextSize)}function a(){for(var t=o.call(this,this._node.getSize()),e=this._node&&this._node.getNext?this._node.getNext():null;e&&this._position+this._positionOffset>=t;)this._positionOffset-=t,this._node=e,t=o.call(this,this._node.getSize()),e=this._node&&this._node.getNext?this._node.getNext():null;for(var i=this._node&&this._node.getPrevious?this._node.getPrevious():null;i&&this._position+this._positionOffset<0;){var n=o.call(this,i.getSize());this._positionOffset+=n,this._node=i,i=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function c(){var t=null,e=this._position,i=[];this._onEdge=0;for(var n=-this._positionOffset,c=r.call(this),u=this._node;u&&n-e<c+this.options.margin;)n+=s.call(this,u,n,i),u=u.getNext?u.getNext():null;var h=this._node,l=o.call(this,h.getSize());if(c>n){for(;h&&c>l;)h=h.getPrevious(),h&&(l+=o.call(this,h.getSize()));for(h=this._node;h&&c>l;)h=h.getNext(),h&&(l+=o.call(this,h.getSize()))}var p=void 0!==l&&c>l?l:c;for(!u&&p>=n-e?(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:n-p})):!this._node.getPrevious()&&0>=e&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})),u=this._node&&this._node.getPrevious?this._node.getPrevious():null,n=-this._positionOffset,u&&(t=u.getSize?u.getSize():this._contextSize,n-=o.call(this,t));u&&n-e>-(r.call(this)+this.options.margin);)s.call(this,u,n,i),u=u.getPrevious?u.getPrevious():null,u&&(t=u.getSize?u.getSize():this._contextSize,n-=o.call(this,t));return a.call(this),i}var u=t("famous/core/Entity"),h=t("famous/core/Group"),l=t("famous/core/OptionsManager"),p=t("famous/core/Transform"),f=t("famous/utilities/Utility"),d=t("famous/core/ViewSequence"),m=t("famous/core/EventHandler");n.DEFAULT_OPTIONS={direction:f.Direction.Y,margin:0,clipSize:void 0},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.onEdge=function(){return this._onEdge},n.prototype.outputFrom=function(t,e){t||(t=function(t){return this.options.direction===f.Direction.X?p.translate(t,0):p.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return p.inverse(t(-e))}},n.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new d({array:t})),this._node=t,this._positionOffset=0},n.prototype.getSize=function(t){return t?this._contextSize:this._size},n.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,o=t.size;this.options.clipSize||o[0]===this._contextSize[0]&&o[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize=o,this.options.direction===f.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var s=this._masterOutputFunction(-this._position);return{transform:p.multiply(e,s),opacity:i,origin:n,target:this.group.render()}},i.exports=n}),n("famous/views/Scrollview",["require","exports","module","famous/utilities/Utility","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/inputs/GenericSync","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new S(this.options),this._node=null,this._physicsEngine=new y,this._particle=new v,this._physicsEngine.addBody(this._particle),this.spring=new w({anchor:[0,0,0]}),this.drag=new _({forceFunction:_.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new _({forceFunction:_.FORCE_FUNCTIONS.LINEAR}),this.sync=new b({direction:this.options.direction}),this._eventInput=new O,this._eventOutput=new O,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),O.setInputHandler(this,this._eventInput),O.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=0,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new T,this._scroller.positionFrom(this.getPosition.bind(this)),t&&this.setOptions(t),a.call(this)}function o(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),u.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function s(t){var e=-t.velocity,i=-t.delta;this._onEdge&&t.slip&&(0>e&&this._onEdge<0||e>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.getVelocity())&&o.call(this,t)),this._earlyEnd||(this._touchVelocity=e,t.slip?this.setVelocity(e):this.setPosition(this.getPosition()+i))}function r(t){if(this._touchCount=t.count||0,!this._touchCount){u.call(this),this._onEdge&&f.call(this,this._edgeSpringPosition,E.EDGE),c.call(this);var e=-t.velocity,i=this.options.speedLimit;t.slip&&(i*=this.options.edgeGrip),-i>e?e=-i:e>i&&(e=i),this.setVelocity(e),this._touchVelocity=void 0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",o),this._eventInput.on("update",s),this._eventInput.on("end",r),this._scroller.on("edgeHit",function(t){this._edgeSpringPosition=t.position}.bind(this))}function c(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function u(){this._springState=E.NONE,this._physicsEngine.detachAll()}function h(t){var e=this.options.direction,i=(t.getSize()||this._scroller.getSize())[e];return i||(i=this._scroller.getSize()[e]),i}function l(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this._touchCount||this._springState===E.EDGE||f.call(this,this._edgeSpringPosition,E.EDGE)):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springState&&Math.abs(this.getVelocity())<.001&&(u.call(this),c.call(this))),this._onEdge=t}function p(){if(this._needsPaginationCheck&&!this._touchCount&&this._springState!==E.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var e=this.getPosition(),i=Math.abs(t)>this.options.pageSwitchSpeed,n=h.call(this,this._node),o=e>.5*n,s=t>0;o&&!i||i&&s?this.goToNextPage():f.call(this,0,E.PAGE),this._needsPaginationCheck=!1}}}function f(t,e){var i;e===E.EDGE?(this._edgeSpringPosition=t,i={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):e===E.PAGE&&(this._pageSpringPosition=t,i={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(i),e&&!this._springState&&(u.call(this),this._springState=e,c.call(this)),this._springState=e}function d(){for(var t=this.getPosition(),e=h.call(this,this._node),i=this._node.getNext();t>e+C&&i;)m.call(this,-e),t-=e,this._scroller.sequenceFrom(i),this._node=i,i=this._node.getNext(),e=h.call(this,this._node);for(var n,o=this._node.getPrevious();-C>t&&o;)n=h.call(this,o),this._scroller.sequenceFrom(o),this._node=o,m.call(this,n),t+=n,o=this._node.getPrevious()}function m(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._springState===E.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===E.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var g=t("famous/utilities/Utility"),y=t("famous/physics/PhysicsEngine"),v=t("famous/physics/bodies/Particle"),_=t("famous/physics/forces/Drag"),w=t("famous/physics/forces/Spring"),b=t("famous/inputs/GenericSync"),O=t("famous/core/EventHandler"),S=t("famous/core/OptionsManager"),x=t("famous/core/ViewSequence"),T=t("famous/views/Scroller"),C=.5;n.DEFAULT_OPTIONS={direction:g.Direction.Y,rails:!0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10};var E={NONE:0,EDGE:1,PAGE:2};n.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},n.prototype.getPosition=function(){return this._particle.getPosition1D()},n.prototype.setPosition=function(t){this._particle.setPosition1D(t)},n.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},n.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},n.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=g.Direction.X:"y"===t.direction&&(t.direction=g.Direction.Y)),this._scroller.setOptions(t),this._optionsManager.setOptions(t),void 0===this.options.margin&&(this.options.margin=1e3),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===g.Direction.X?b.DIRECTION_X:b.DIRECTION_Y})},n.prototype.goToPreviousPage=function(){if(!this._node)return null;var t=this._node.getPrevious();if(t){var e=this.getPosition(),i=h.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var n=C>e?-i:0;f.call(this,n,E.PAGE),m.call(this,i)}return this._eventOutput.emit("pageChange",{direction:-1}),t},n.prototype.goToNextPage=function(){if(!this._node)return null;var t=this._node.getNext();if(t){var e=this.getPosition(),i=h.call(this,this._node),n=h.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var o=e>i-C?i+n:i;f.call(this,o,E.PAGE),m.call(this,-i)}return this._eventOutput.emit("pageChange",{direction:1}),t},n.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new x({array:t})),this._node=t,this._scroller.sequenceFrom(t)},n.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},n.prototype.render=function(){return this._node?(d.call(this),l.call(this,this._scroller.onEdge()),this.options.paginated&&p.call(this),this._scroller.render()):null},i.exports=n}),n("famous/surfaces/ImageSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function n(){this._imageUrl=void 0,o.apply(this,arguments)}var o=t("famous/core/Surface");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.elementType="img",n.prototype.elementClass="famous-surface",n.prototype.setContent=function(t){this._imageUrl=t,this._contentDirty=!0},n.prototype.deploy=function(t){t.src=this._imageUrl||""},n.prototype.recall=function(t){t.src=""},i.exports=n}),n("widgets/BookGrid",["require","exports","module","famous/core/View","famous/core/Modifier","famous/core/Surface","famous/views/Scrollview","famous/surfaces/ContainerSurface","famous/views/SequentialLayout","famous/surfaces/ImageSurface","famous/core/Transform","famous/utilities/Utility","underscore"],function(t,e,i){function n(t,e){s.apply(this,arguments),this.books=[],this.options.itemSize||(this.options.itemSize=[this.options.size[0]/this.options.itemsPerRow,this.options.size[1]/this.options.rowsOnScreen]),this._imageHeight=.4*this.options.itemSize[1],this.gridRows=[],this.scrollView=new a({direction:u.Direction.Y,friction:0,paginated:!0,drag:.001}),this.scrollView.sequenceFrom(this.gridRows);for(var i=0;i<e.length;i++)this.addBookToGrid(e[i]);this.add(this.scrollView)}function o(){var t=new c({direction:u.Direction.X});return t.items=[],t.sequenceFrom(t.items),t}var s=t("famous/core/View"),r=(t("famous/core/Modifier"),t("famous/core/Surface")),a=t("famous/views/Scrollview"),c=(t("famous/surfaces/ContainerSurface"),t("famous/views/SequentialLayout")),u=(t("famous/surfaces/ImageSurface"),t("famous/core/Transform"),t("famous/utilities/Utility")),h=t("underscore");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={itemSize:void 0,pictureAspectRatio:.769,itemsPerRow:3,rowsOnScreen:4},n.prototype.createBookSurface=function(t){t.imageUrl=t.imageUrl?t.imageUrl:"content/images/books/1.jpg";var e=new r({size:this.options.itemSize,classes:["book-item"],content:this._bookRenderer(h.extend({imageHeight:this._imageHeight},t))});return e.data=t,e.on("click",function(e){this._eventOutput.emit("book-item-clicked",{target:e,data:t})}.bind(this,e)),e},n.prototype._bookRenderer=h.template('<div class="book-info-block"><img class="book-image" height="<%= imageHeight %>" src="<%= imageUrl %>"><div class="book-price">$<%= price %></div><div class="book-name"><%= name %></div></div>'),n.prototype.addBookToGrid=function(t){var e=this.createBookSurface(t);this.books.push(e),0===this.gridRows.length&&(this.gridRows[this.gridRows.length]=o());var i=this.gridRows[this.gridRows.length-1];i.items.length>=this.options.itemsPerRow&&(i=o(),this.gridRows[this.gridRows.length]=i),e.pipe(this.scrollView),i.items.push(e)},i.exports=n}),n("activity/DummyHomeActivity",["require","exports","module","activity/common/Activity","famous/core/Surface","widgets/BookGrid","underscore"],function(t,e,i){function n(t,e){o.apply(this,arguments);var i={rowsOnScreen:4,itemsPerRow:3};switch(e.deviceInfo.sizeClassification){case e.SizeClassification.SMALL:i={rowsOnScreen:2,itemsPerRow:2};break;case e.SizeClassification.LARGE:i={rowsOnScreen:5,itemsPerRow:4};break;case e.SizeClassification.XLARGE:i={rowsOnScreen:5,itemsPerRow:4}}if(e.deviceInfo.orientation===e.Orientation.LANDSCAPE)if(e.deviceInfo.sizeClassification===e.SizeClassification.SMALL||e.deviceInfo.sizeClassification===e.SizeClassification.NORMAL)i.itemsPerRow=3,i.rowsOnScreen=1;else{var n=i.rowsOnScreen;i.rowsOnScreen=i.itemsPerRow,i.itemsPerRow=n}var c=new s(r.extend({size:this.options.size},i),a);c.on("book-item-clicked",function(t){window.App.activityHolder.showCachedActivity("DummyBookDetailsActivity",void 0,t.data),window.App.bottomToolbar.setActiveItem(void 0)}),this.add(c)}var o=t("activity/common/Activity"),s=(t("famous/core/Surface"),t("widgets/BookGrid")),r=t("underscore"),a=[{name:"Death on Demand",price:"9.20",imageUrl:"content/images/books/1.jpg"},{name:"Deeply Odd",price:"5.70",imageUrl:"content/images/books/2.jpg"},{name:"Funny Business",price:"20.00",imageUrl:"content/images/books/3.jpg"},{name:"Steve Jobs",price:"21.99",imageUrl:"content/images/books/4.jpg"},{name:"Sex Machine",price:"10.30",imageUrl:"content/images/books/5.jpg"},{name:"Jerusalem",price:"15.99",imageUrl:"content/images/books/6.jpg"},{name:"Dragon Warrior",price:"4.20",imageUrl:"content/images/books/7.jpg"},{name:"The Silver Linings Playbook",price:"9.70",imageUrl:"content/images/books/8.jpg"},{name:"The Goldfinch",price:"3.75",imageUrl:"content/images/books/10.jpg"},{name:"Death on Demand",price:"9.20",imageUrl:"content/images/books/1.jpg"},{name:"Deeply Odd",price:"5.70",imageUrl:"content/images/books/2.jpg"},{name:"Funny Business",price:"20.00",imageUrl:"content/images/books/3.jpg"},{name:"Steve Jobs",price:"21.99",imageUrl:"content/images/books/4.jpg"},{name:"Sex Machine",price:"10.30",imageUrl:"content/images/books/5.jpg"},{name:"Jerusalem",price:"15.99",imageUrl:"content/images/books/6.jpg"},{name:"Dragon Warrior",price:"4.20",imageUrl:"content/images/books/7.jpg"},{name:"The Silver Linings Playbook",price:"9.70",imageUrl:"content/images/books/8.jpg"},{name:"The Goldfinch",price:"3.75",imageUrl:"content/images/books/10.jpg"}];n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.prepareBottomToolbar=function(){},n.prototype.prepareNavigationBar=function(t,e){e.setContent("Book store Famo.Us Demo")},i.exports=n}),n("activity/DummyBookDetailsActivity",["require","exports","module","activity/common/Activity","famous/core/Surface","famous/surfaces/ImageSurface","famous/core/Modifier","famous/core/Transform","underscore"],function(t,e,i){function n(){o.apply(this,arguments),this.bookTitle=new s({classes:["book-title"],size:[this.options.size[0]/2,!0],content:"Loading"}),this.add(this.bookTitle);var t=this.options.size[1]/3;this.bookImage=new s({classes:["book-image"],content:this._bookImageRenderer({url:"content/images/books/1.jpg"}),size:[this.options.size[0]-this.bookTitle.size[0],t]}),this.add(new r({origin:[1,0]})).add(this.bookImage);
var e="40";this.price=new s({classes:["book-price"],size:[this.bookImage.size[0],e],content:"$0.00"}),this.add(new r({transform:a.translate(0,t+e),origin:[1,0]})).add(this.price);var i=200;this.intro=new s({classes:["intro-block"],size:[this.options.size[0],i],content:this._bookIntroRenderer({text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas consequat ante orci, ac malesuada elit rhoncus eu. Quisque ultricies porttitor neque, a porttitor ipsum. Ut quis tortor et quam suscipit dictum in in nunc. Sed nec massa aliquam, consectetur diam ut, auctor leo. "})}),this.add(new r({transform:a.translate(0,t+e)})).add(this.intro)}var o=t("activity/common/Activity"),s=t("famous/core/Surface"),r=(t("famous/surfaces/ImageSurface"),t("famous/core/Modifier")),a=t("famous/core/Transform"),c=t("underscore");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.onBackAction=function(t,e){t.activityHolder.showCachedActivity("DummyHomeActivity",e)},n.prototype.beforeOpening=function(t,e){this.bookImage.setContent(this._bookImageRenderer({url:e.imageUrl})),this.bookTitle.setContent(e.name)},n.prototype._bookImageRenderer=c.template('<img class="book-image" alt="Cover" src="<%= url %>">'),n.prototype._bookIntroRenderer=c.template('<div class="intro-label activity-label">Intro</div><div class="intro-text"><%= text %></div>'),i.exports=n}),n("activity/DummyFavoritesActivity",["require","exports","module","activity/common/Activity","famous/core/Surface","widgets/BookGrid"],function(t,e,i){function n(){o.apply(this,arguments);var t=new s({size:this.options.size},r);t.on("book-item-clicked",function(t){window.App.activityHolder.showCachedActivity("DummyBookDetailsActivity",void 0,t.data),window.App.bottomToolbar.setActiveItem(void 0)}),this.add(t)}var o=t("activity/common/Activity"),s=(t("famous/core/Surface"),t("widgets/BookGrid")),r=[{name:"Sex Machine",price:"10.30",imageUrl:"content/images/books/5.jpg"},{name:"Steve Jobs",price:"21.99",imageUrl:"content/images/books/4.jpg"},{name:"The Silver Linings Playbook",price:"9.70",imageUrl:"content/images/books/8.jpg"},{name:"The Goldfinch",price:"3.75",imageUrl:"content/images/books/10.jpg"},{name:"Jerusalem",price:"15.99",imageUrl:"content/images/books/6.jpg"}];n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.prepareBottomToolbar=function(){},n.prototype.prepareNavigationBar=function(t,e){e.setContent("Favorites")},n.prototype.onBackAction=function(t,e){t.activityHolder.showCachedActivity("DummyHomeActivity",e)},i.exports=n}),n("App",["require","exports","module","famous/views/HeaderFooterLayout","famous/core/Surface","famous/surfaces/ContainerSurface","famous/core/OptionsManager","widgets/common/NavigationBar","activity/common/ActivityHolder","widgets/common/BottomToolbar","widgets/common/BottomToolbarItem","activity/DummyHomeActivity","activity/DummyBookDetailsActivity","activity/DummyFavoritesActivity"],function(t,e,i){function n(t,e){window.App=this,this.updateDeviceInfo(),this.context=t,this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),e&&this.setOptions(e);var i=new o({headerSize:this.options.layout.headerHeight,footerSize:this.options.layout.footerHeight});return this.contentContainer=new s({size:[window.innerWidth,window.innerHeight-this.options.layout.headerHeight-this.options.layout.footerHeight],properties:{overflow:"hidden"}}),this.header=new a({size:[window.innerWidth,i.options.headerSize],classes:["app-header"],backContent:"Back"}),this.header._optionsManager.set("backClasses",["back-button"]),this.header._optionsManager.set("moreClasses",["more-button"]),this.footer=new s({size:[void 0,i.footerSize],classes:["app-footer"]}),i.footer.add(this.footer),i.content.add(this.contentContainer),i.header.add(this.header),t.add(i),this.bottomToolbar=this.createBottomNavigation(),this.activityHolder=this.createActivityHolder(),this.activityHolder.showCachedActivity("DummyHomeActivity",this.activityHolder.ANIMATION.fadeIn),this}var o=t("famous/views/HeaderFooterLayout"),s=(t("famous/core/Surface"),t("famous/surfaces/ContainerSurface")),r=t("famous/core/OptionsManager"),a=t("widgets/common/NavigationBar"),c=t("activity/common/ActivityHolder"),u=t("widgets/common/BottomToolbar"),h=t("widgets/common/BottomToolbarItem"),l=t("activity/DummyHomeActivity"),p=t("activity/DummyBookDetailsActivity"),f=t("activity/DummyFavoritesActivity");n.DEFAULT_OPTIONS={layout:{headerHeight:50,footerHeight:60}},n.prototype.createBottomNavigation=function(){var t=new u({items:[new h({id:"home",text:"Home",iconClass:"glyphicon glyphicon-home",onClick:function(e){this.activityHolder.showCachedActivity("DummyHomeActivity",this.activityHolder.ANIMATION.slideFromLeft),t.setActiveItem(e)}.bind(this)}),new h({id:"favorites",iconClass:"glyphicon glyphicon-heart",text:"Favorites",onClick:function(e){this.activityHolder.showCachedActivity("DummyFavoritesActivity"),t.setActiveItem(e)}.bind(this)})]});return this.footer.add(t),t},n.prototype.createActivityHolder=function(){var t=new c({size:this.contentContainer.getSize(!1)});return this.contentContainer.add(t),t.createCachedActivity(l),t.createCachedActivity(p),t.createCachedActivity(f),this.header.on("back",function(){t.currentActivity&&t.currentActivity.onBackAction(window.App,window.App.activityHolder.ANIMATION.slideFromLeft)}),t},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.Orientation={PORTRAIT:0,LANDSCAPE:1},n.prototype.SizeClassification={XSMALL:0,SMALL:1,NORMAL:2,LARGE:3,XLARGE:4},n.prototype.classifyScreenSize=function(t,e){var i=t*e/window.devicePixelRatio;return 115200>=i?this.SizeClassification.SMALL:150400>=i?this.SizeClassification.NORMAL:307200>=i?this.SizeClassification.LARGE:460800>=i?this.SizeClassification.XLARGE:this.SizeClassification.XLARGE},n.prototype.updateDeviceInfo=function(){this.deviceInfo={orientation:window.innerWidth<window.innerHeight?this.Orientation.PORTRAIT:this.Orientation.LANDSCAPE,sizeClassification:this.classifyScreenSize(window.innerWidth,window.innerHeight)}},i.exports=n}),n("main",["require","exports","module","fastclick","famous/core/Engine","famous/core/Surface","famous/core/Modifier","App"],function(t){var e=t("fastclick");e.attach(document.body);{var i=t("famous/core/Engine"),n=(t("famous/core/Surface"),t("famous/core/Modifier"),t("App")),o=i.createContext();new n(o)}}),i(["main"])}();